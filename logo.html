<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Infinie & gratuit — Générateur de logo (100% local)</title>
  <meta name="color-scheme" content="dark" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <!-- Inter + large set for variations -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=Plus+Jakarta+Sans:wght@500;700;800&family=Manrope:wght@500;700;800&family=Montserrat:wght@600;800&family=Poppins:wght@600;800&family=DM+Sans:wght@700&family=Sora:wght@600;800&family=Space+Grotesk:wght@600;700&family=Exo+2:wght@700;800&family=Orbitron:wght@700;800&family=Bebas+Neue&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#0B0B0D;--panel:#0d1120;--text:#E6ECF7;--muted:#A4ADBD;--border:rgba(95,123,255,0.18);--accent1:#2FE3FF;--accent2:#1B4CFF;--ring:0 0 0 2px rgba(43,167,255,.35)}
    :root{--container-max:1100px}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 8% 12%, rgba(43,167,255,0.12), transparent 60%),
        radial-gradient(1000px 800px at 82% 85%, rgba(27,76,255,0.10), transparent 55%),
        var(--bg);
      letter-spacing:.2px;
    }
    .container{max-width:var(--container-max); margin:0 auto; padding:32px 20px 80px}
    .nav{display:flex; align-items:center; gap:12px}
    .logo{display:grid; place-items:center; width:36px; height:36px; border-radius:999px; color:#fff; font-weight:800;
      background: radial-gradient(circle at 30% 30%, var(--accent1), var(--accent2));
      box-shadow: inset 0 1px 0 rgba(255,255,255,.12), 0 8px 30px rgba(0,0,0,.35);
      border:1px solid rgba(255,255,255,.1)
    }
    .brand{font-weight:800}
    .badge{margin-left:auto; display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; font-size:12px; color:#9fb4ff; background:#0f1420; border:1px solid #1a2340}
    .badge .dot{width:8px; height:8px; border-radius:999px; background:linear-gradient(90deg, var(--accent1), var(--accent2))}

    .panel{margin-top:18px; background:
      linear-gradient(160deg, rgba(27,76,255,0.06), transparent),
      linear-gradient(180deg, rgba(47,227,255,0.05), transparent 40%),
      var(--panel);
      border:1px solid var(--border); border-radius:16px; padding:18px; box-shadow:0 20px 60px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.03)
    }
    .title{font-size:42px; line-height:1.1; margin:6px 0 8px}
    .small{color:var(--muted); font-size:12px}

    .stack{display:grid; grid-template-columns: 1.1fr .9fr; gap:18px}
    @media (max-width:980px){.stack{grid-template-columns:1fr;}}

    .tool{display:flex; flex-direction:column; gap:14px}
    .field{display:flex; gap:10px; align-items:center}
    .input{flex:1; background:#0b0f1a; border:1px solid #1a2340; border-radius:12px; padding:12px 14px; color:var(--text); outline:none; font-weight:600}
    .input:focus{box-shadow:var(--ring); border-color:#3a63ff}
    .toolbar{display:flex; gap:10px}
    .btn{background:#0b0f1a; border:1px solid #1a2340; border-radius:12px; padding:12px 14px; font-weight:700; color:var(--text); cursor:pointer}
    .btn:hover{box-shadow:var(--ring); border-color:#3a63ff}
    .btn.primary{background:linear-gradient(90deg, var(--accent1), var(--accent2)); border:none; color:#fff}

    .preview{position:relative; aspect-ratio:16/10; border-radius:14px; overflow:hidden; background:#090f17; display:grid; place-items:center;}
    /* subtle checker without external asset */
    .preview::after{
      content:""; position:absolute; inset:0; pointer-events:none; opacity:.15; background-size:24px 24px; background-image:
        linear-gradient(45deg, rgba(255,255,255,.08) 25%, transparent 25%, transparent 75%, rgba(255,255,255,.08) 75%, rgba(255,255,255,.08)),
        linear-gradient(45deg, rgba(255,255,255,.08) 25%, transparent 25%, transparent 75%, rgba(255,255,255,.08) 75%, rgba(255,255,255,.08));
      background-position:0 0,12px 12px
    }

    .thinking{position:absolute; inset:0; display:none; place-items:center; background:radial-gradient(circle at 30% 30%, rgba(47,227,255,.25), rgba(27,76,255,.15));}
    .thinking.show{display:grid}
    .spinner{width:64px; height:64px; border-radius:999px; border:3px solid rgba(255,255,255,.12); border-right-color:rgba(47,227,255,.9); animation:spin 1s linear infinite; box-shadow:0 0 0 1px rgba(255,255,255,.08)}
    @keyframes spin{to{transform:rotate(360deg)}}
    .think-text{margin-top:14px; font-size:12px; color:#9fb4ff; text-shadow:0 1px 0 rgba(0,0,0,.3); letter-spacing:.3px}

    .foot{margin-top:12px; color:var(--muted); font-size:12px}

    /* Export toast */
    .toast{position:fixed; bottom:16px; left:50%; transform:translateX(-50%); background:#0f1420; border:1px solid #1a2340; color:#9fb4ff; padding:8px 12px; border-radius:10px; font-size:12px; display:none}
    .toast.show{display:block}
  </style>
</head>
<body>
  <div class="container">
    <div class="nav">
      <div class="logo" aria-hidden>∞</div>
      <div class="brand">Infinie & gratuit</div>
      <div class="badge"><span class="dot"></span><span>Générateur de logo — 100% local</span></div>
    </div>

    <div class="panel">
      <h1 class="title">Génère un logo stylé en 1 clic</h1>
      <div class="small">IA locale — rapide & privé. Entrez un nom, cliquez, laissez l'algorithme explorer des pistes créatives.</div>

      <div class="stack" style="margin-top:16px">
        <div class="tool">
          <label class="small" for="brand">Nom de l'entreprise</label>
          <div class="field">
            <input id="brand" class="input" placeholder="ex. Aerix, Infinie Studio, Pulseo…" value="Infinie Studio" />
          </div>
          <div class="toolbar">
            <button id="btnGen" class="btn primary">Générer</button>
            <button id="btnRe" class="btn">Recommencer</button>
            <button id="btnExport" class="btn">Exporter</button>
          </div>
          <div class="foot">Astuce: <strong>Shift+clic</strong> sur « Exporter » pour obtenir un <strong>SVG</strong> vectoriel.</div>
        </div>

        <div class="preview" id="preview">
          <div class="thinking" id="thinking" aria-live="polite">
            <div>
              <div class="spinner"></div>
              <div class="think-text" id="thinkText">Analyse du nom…</div>
            </div>
          </div>
          <!-- SVG logo injected here -->
        </div>
      </div>
    </div>
  </div>

  <div class="toast" id="toast">Export terminé ✅</div>

  <script>
  const ACCENT1 = getCss('--accent1');
  const ACCENT2 = getCss('--accent2');
  const TEXT = getCss('--text');

  const FONTS = [
    'Inter', 'Plus Jakarta Sans', 'Manrope', 'Montserrat', 'Poppins', 'DM Sans',
    'Sora', 'Space Grotesk', 'Exo 2', 'Orbitron', 'Bebas Neue'
  ];

  const LAYOUTS = ['left', 'stack', 'badge', 'emblem'];

  const THINKING_STEPS = [
    'Analyse du nom…', 'Génération de pistes…', 'Affinage des variantes…'
  ];

  // Helpers
  function getCss(name){return getComputedStyle(document.documentElement).getPropertyValue(name).trim()}
  function rand(arr){return arr[Math.floor(Math.random()*arr.length)]}
  function randBetween(min,max){return Math.random()*(max-min)+min}
  function clamp(n,min,max){return Math.max(min, Math.min(max,n))}
  function initialsOf(name){return (name||'').split(/\s+/).filter(Boolean).map(w=>w[0]).join('').slice(0,3).toUpperCase()||'IN'}
  function slug(s){return s.toLowerCase().replace(/[^a-z0-9]+/g,'-').replace(/^-+|-+$/g,'')}

  // SVG helpers
  const svgns = 'http://www.w3.org/2000/svg';
  function svgEl(tag,attrs={},children=[]) {
    const el = document.createElementNS(svgns, tag);
    for (const [k,v] of Object.entries(attrs)) el.setAttribute(k,v);
    for (const c of children) el.appendChild(c);
    return el;
  }

  function makeDefs(){
    const defs = svgEl('defs');
    const grad = svgEl('linearGradient',{id:'g1', x1:'0%', y1:'0%', x2:'100%', y2:'100%'});
    grad.appendChild(svgEl('stop',{offset:'0%', 'stop-color':ACCENT1}));
    grad.appendChild(svgEl('stop',{offset:'100%', 'stop-color':ACCENT2}));

    const glow = svgEl('filter',{id:'glow', x:'-50%', y:'-50%', width:'200%', height:'200%'});
    glow.appendChild(svgEl('feGaussianBlur', {stdDeviation:'4', result:'blur'}));
    glow.appendChild(svgEl('feMerge',{},[
      svgEl('feMergeNode',{in:'blur'}),
      svgEl('feMergeNode',{in:'SourceGraphic'})
    ]));

    const shadow = svgEl('filter',{id:'softshadow', x:'-50%', y:'-50%', width:'200%', height:'200%'});
    shadow.appendChild(svgEl('feDropShadow',{dx:'0', dy:'8', stdDeviation:'12', 'flood-color':'rgba(0,0,0,0.35)'}));

    defs.appendChild(grad); defs.appendChild(glow); defs.appendChild(shadow);
    return defs;
  }

  // Icon library (pure SVG primitives)
  function iconInfinity(size){
    const path = `M ${-size*.6} 0 C ${-size*.6} ${-size*.6}, ${-size*.1} ${-size*.6}, 0 0 C ${size*.1} ${size*.6}, ${size*.6} ${size*.6}, ${size*.6} 0 C ${size*.6} ${-size*.6}, ${size*.1} ${-size*.6}, 0 0 C ${-size*.1} ${size*.6}, ${-size*.6} ${size*.6}, ${-size*.6} 0 Z`;
    return svgEl('path',{d:path, fill:'url(#g1)'});
  }
  function iconBolt(size){
    const s=size; const d=`M ${-0.2*s} ${-0.7*s} L ${0.3*s} ${-0.1*s} H ${0.0*s} L ${0.2*s} ${0.7*s} L ${-0.3*s} ${0.1*s} H ${0.0*s} Z`;
    return svgEl('path',{d, fill:'url(#g1)'});
  }
  function iconStar(size){
    const points=[]; const spikes=5; const outer=size; const inner=size*0.42;
    for(let i=0;i<spikes*2;i++){
      const r=i%2===0?outer:inner; const a=(Math.PI/spikes)*i - Math.PI/2;
      points.push(`${Math.cos(a)*r},${Math.sin(a)*r}`)
    }
    return svgEl('polygon',{points:points.join(' '), fill:'url(#g1)'});
  }
  function iconHex(size){
    const pts=[]; for(let i=0;i<6;i++){const a=Math.PI/3*i; pts.push(`${Math.cos(a)*size},${Math.sin(a)*size}`)}
    return svgEl('polygon',{points:pts.join(' '), fill:'none', stroke:'url(#g1)', 'stroke-width':size*0.18, 'stroke-linejoin':'round'});
  }
  function iconSpark(size){
    const g=svgEl('g');
    g.appendChild(svgEl('rect',{x:-size*0.15,y:-size,width:size*0.3,height:size*2,rx:size*0.12, fill:'url(#g1)'}));
    g.appendChild(svgEl('rect',{x:-size,y:-size*0.15,width:size*2,height:size*0.3,rx:size*0.12, fill:'url(#g1)'}));
    return g;
  }
  function iconWave(size){
    const d=`M ${-size} 0 C ${-size*0.6} ${-size*0.8}, ${-size*0.2} ${size*0.8}, ${size*0.2} 0 S ${size*0.6} ${-size*0.8}, ${size} 0`;
    return svgEl('path',{d, fill:'none', stroke:'url(#g1)', 'stroke-width':size*0.25, 'stroke-linecap':'round'});
  }
  function iconCircle(size){ return svgEl('circle',{r:size, fill:'url(#g1)'}); }
  function iconDiamond(size){ return svgEl('rect',{x:-size,y:-size,width:size*2,height:size*2, transform:'rotate(45)', rx:size*0.2, fill:'url(#g1)'}); }

  const ICONS = [iconInfinity, iconBolt, iconStar, iconHex, iconSpark, iconWave, iconCircle, iconDiamond];

  function clearPreview(){
    const prev=document.getElementById('preview');
    [...prev.querySelectorAll('svg')].forEach(n=>n.remove());
  }

  function generateLogo(){
    const name = (document.getElementById('brand').value||'').trim() || 'Votre marque';
    clearPreview();
    const prev = document.getElementById('preview');
    const w = prev.clientWidth * window.devicePixelRatio; // logical size to help export sharpness
    const h = prev.clientHeight * window.devicePixelRatio;

    const svg = svgEl('svg',{id:'logoSvg', viewBox:`0 0 1200 750`, preserveAspectRatio:'xMidYMid meet', style:'width:100%;height:100%;display:block;', xmlns:svgns, 'xmlns:xlink':'http://www.w3.org/1999/xlink'});
    svg.appendChild(makeDefs());

    // subtle vignette
    const bg = svgEl('rect',{x:0,y:0,width:1200,height:750, fill:'none'});
    svg.appendChild(bg);

    const g = svgEl('g',{filter:'url(#softshadow)'});
    svg.appendChild(g);

    const layout = rand(LAYOUTS);
    const font = rand(FONTS);
    const weight = rand([600,700,800]);
    const mono = Math.random()<0.5; // lettermark inside icon optionally
    const init = initialsOf(name);

    // Icon container
    const iconSize = randBetween(110, 170);
    const iconFn = rand(ICONS);
    const iconGroup = svgEl('g',{transform:'translate(0,0)'});

    // container shape background (squircle/round/rounded)
    const container = svgEl('g');
    const bgR = iconSize*1.05;
    const outer = svgEl('rect',{x:-bgR,y:-bgR,width:bgR*2,height:bgR*2, rx:Math.round(bgR*0.35), fill:'rgba(20,30,50,.8)', stroke:'rgba(255,255,255,.08)', 'stroke-width':1});
    const ring = svgEl('rect',{x:-bgR,y:-bgR,width:bgR*2,height:bgR*2, rx:Math.round(bgR*0.35), fill:'none', stroke:'url(#g1)', 'stroke-width':2, opacity:.8});
    container.appendChild(outer); container.appendChild(ring);

    // icon
    const icon = iconFn(iconSize*0.6);
    icon.setAttribute('filter','url(#glow)');

    iconGroup.appendChild(container);
    iconGroup.appendChild(icon);

    if(mono){
      const monoText = svgEl('text',{x:0,y:7,'text-anchor':'middle','font-family':rand(FONTS),'font-weight':800,'font-size':iconSize*0.5, fill:'#0b0f1a', opacity:.9});
      monoText.textContent = init;
      container.appendChild(monoText);
    }

    // Text group
    const textGroup = svgEl('g');
    const nameText = svgEl('text',{'font-family':font, 'font-weight':weight, fill:TEXT});
    // adapt font-size to length
    const baseSize = 140;
    const size = clamp(baseSize - Math.max(0, name.length-10)*6, 56, baseSize);
    nameText.setAttribute('font-size', size);
    nameText.setAttribute('letter-spacing', name.length>14? '0' : '.5px');
    nameText.textContent = name;

    // accent underline or gradient stroke
    if(Math.random()<0.6){
      nameText.setAttribute('fill','url(#g1)');
      nameText.setAttribute('stroke','rgba(255,255,255,.08)');
      nameText.setAttribute('stroke-width','1');
    }

    const tag = svgEl('text',{'font-family': rand(FONTS), 'font-weight':600, 'font-size': clamp(size*0.22, 14, 26), fill:'rgba(230,236,247,.75)'});
    tag.textContent = rand(['studio', 'collective', 'labs', 'systems', 'creative', 'digital', 'works', 'atelier', 'agency', 'interactive']);

    // Positioning per layout
    if(layout==='left'){
      iconGroup.setAttribute('transform',`translate(380,375)`);
      textGroup.setAttribute('transform','translate(580,355)');
      nameText.setAttribute('x','0'); nameText.setAttribute('y','0'); nameText.setAttribute('text-anchor','start');
      tag.setAttribute('x','0'); tag.setAttribute('y', size*0.55);
    } else if(layout==='stack'){
      iconGroup.setAttribute('transform',`translate(600,280)`);
      textGroup.setAttribute('transform','translate(600,520)');
      nameText.setAttribute('x','0'); nameText.setAttribute('y','0'); nameText.setAttribute('text-anchor','middle');
      tag.setAttribute('x','0'); tag.setAttribute('y', size*0.55); tag.setAttribute('text-anchor','middle');
    } else if(layout==='badge'){
      // rounded badge container
      const bw = 860, bh = 240, br = 80;
      const badge = svgEl('rect',{x:170,y:255,width:bw,height:bh,rx:br, fill:'rgba(12,18,32,.95)', stroke:'url(#g1)', 'stroke-width':2});
      g.appendChild(badge);
      iconGroup.setAttribute('transform',`translate(260,375)`);
      textGroup.setAttribute('transform','translate(470,355)');
      nameText.setAttribute('x','0'); nameText.setAttribute('y','0'); nameText.setAttribute('text-anchor','start');
      tag.setAttribute('x','0'); tag.setAttribute('y', size*0.55);
    } else { // emblem
      const r = 250;
      const circle = svgEl('circle',{cx:600, cy:375, r, fill:'rgba(12,18,32,.92)', stroke:'rgba(255,255,255,.08)', 'stroke-width':1});
      const circleRing = svgEl('circle',{cx:600, cy:375, r:r-6, fill:'none', stroke:'url(#g1)', 'stroke-width':3, opacity:.9});
      g.appendChild(circle); g.appendChild(circleRing);
      iconGroup.setAttribute('transform',`translate(600,330)`);
      textGroup.setAttribute('transform','translate(600,520)');
      nameText.setAttribute('x','0'); nameText.setAttribute('y','0'); nameText.setAttribute('text-anchor','middle');
      tag.setAttribute('x','0'); tag.setAttribute('y', size*0.55); tag.setAttribute('text-anchor','middle');
    }

    // subtle background flare behind icon
    const flare = svgEl('circle',{cx:0,cy:0,r:iconSize*1.05, fill:ACCENT2, opacity:.08, filter:'url(#glow)'});
    iconGroup.insertBefore(flare, container);

    g.appendChild(iconGroup);
    textGroup.appendChild(nameText);
    if(Math.random()<0.9) textGroup.appendChild(tag);
    g.appendChild(textGroup);

    document.getElementById('preview').appendChild(svg);
  }

  // Thinking overlay control
  function showThinking(cb){
    const layer = document.getElementById('thinking');
    const label = document.getElementById('thinkText');
    let i=0; label.textContent = THINKING_STEPS[0];
    layer.classList.add('show');
    const interval = setInterval(()=>{ i=(i+1)%THINKING_STEPS.length; label.textContent = THINKING_STEPS[i]; }, 520);
    const delay = randBetween(900, 1600); // feel snappy but alive
    setTimeout(()=>{ clearInterval(interval); layer.classList.remove('show'); cb&&cb(); }, delay);
  }

  async function exportPNGorSVG(e){
    const asSVG = e && e.shiftKey; // Shift+click => SVG
    const svg = document.getElementById('logoSvg');
    if(!svg){ toast('Génère d\'abord un logo'); return }

    // Ensure webfonts are ready
    await document.fonts.ready;

    const serializer = new XMLSerializer();
    const raw = serializer.serializeToString(svg);

    if(asSVG){
      const blob = new Blob([raw], {type:'image/svg+xml'});
      const url = URL.createObjectURL(blob);
      download(url, `logo-${slug(document.getElementById('brand').value||'marque')}.svg`);
      URL.revokeObjectURL(url);
      toast('SVG exporté ✅');
      return;
    }

    // to PNG at 2048px on longest side
    const scale = 2048 / Math.max(svg.viewBox.baseVal.width, svg.viewBox.baseVal.height);
    const w = Math.round(svg.viewBox.baseVal.width * scale);
    const h = Math.round(svg.viewBox.baseVal.height * scale);

    const img = new Image();
    const svg64 = btoa(unescape(encodeURIComponent(raw)));
    img.src = 'data:image/svg+xml;base64,' + svg64;
    await img.decode();

    const canvas = document.createElement('canvas');
    canvas.width = w; canvas.height = h;
    const ctx = canvas.getContext('2d');
    ctx.clearRect(0,0,w,h);
    ctx.drawImage(img, 0, 0, w, h);
    canvas.toBlob(b=>{
      const url = URL.createObjectURL(b);
      download(url, `logo-${slug(document.getElementById('brand').value||'marque')}.png`);
      URL.revokeObjectURL(url);
      toast('PNG exporté ✅');
    }, 'image/png');
  }

  function download(url, filename){
    const a=document.createElement('a'); a.href=url; a.download=filename; document.body.appendChild(a); a.click(); a.remove();
  }

  function toast(msg){
    const t=document.getElementById('toast'); t.textContent=msg; t.classList.add('show');
    setTimeout(()=>t.classList.remove('show'), 1800);
  }

  // Wiring
  document.getElementById('btnGen').addEventListener('click', ()=> showThinking(generateLogo));
  document.getElementById('btnRe').addEventListener('click', ()=> showThinking(generateLogo));
  document.getElementById('btnExport').addEventListener('click', exportPNGorSVG);
  document.getElementById('brand').addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ e.preventDefault(); showThinking(generateLogo) } });
  // First render: (désactivé) — on attend que l'utilisateur clique sur « Générer »

  </script>
</body>
</html>
